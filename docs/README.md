# 인수 테스트 주도 개발
## 4단계 - 구간 제거 기능

### 요구사항
**지하철 구간 제거 기능을 구현하기**
- [x] 노선의 구간을 제거하는 기능을 구현하기
- [x] 구간 삭제 시 예외 케이스를 고려하기

**지하철 구간 삭제 request**
```http request
DELETE /lines/1/sections?stationId=2 HTTP/1.1
accept: */*
host: localhost:52165
```

### 구간 제거 인수 테스트 목록
- [x] 지하철 상행 종점을 제거한다.
- [x] 지하철 하행 종점을 제거한다.
- [x] 지하철 중간역을 제거한다.
- [x] 등록되어 있지 않은 역은 제거할 수 없다.
- [x] 상행 종점 - 하행 종점으로 이루어진 하나의 구간만 있을 때는 역을 제거할 수 없다.

### 지난 코드리뷰 반영
- [x] 서비스 메서드에 드러나있던 로직을 도메인 메서드로 변경 
- [x] 불필요한 get method 사용 제거
- [x] 담당 할 수 있는 도메인이 있는데, 다른 도메인에 포함되어있던 로직 이동
- [x] Sections의 OneToMany 변수에 cascade, orphanRemoval 속성 부여
    - 서비스 메서드에 드러나있던 로직을 도메인 메서드로 변경와 연계가 필요함
- [x] 의미있는 이름으로 변경
- [x] sections 정렬 메서드 리팩토링
- [x] 중간에 구간 등록 테스트를 기존 상행 - 새로운 하행, 새로운 상행 - 기존 하행 케이스로 나눠 테스트


### 코드리뷰 반영
- [x] 거의 매번 조회하게 되는 Section의 upStation, downStation은 EAGER 조회
- [x] 불필요하게 중복된 section을 갖게 되는 구간 추가 로직 수정
 
